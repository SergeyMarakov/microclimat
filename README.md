# Cистема контроля микроклимата

Этот проект следит за состоянием помещения и управляет его климатом и освещением.

---


## Основные функции:
- Считает количество людей с помощью камеры
- Читает данные: температура помещения и улицы, CO2, свет
- Посылает команды работы для обогревателя, кондиционера, освещения и вентиляции по необходимости
- Сохраняет состояние в JSON-файл
- Отправляет данные через Telegram-бота (@microklim_bot)
- 
---
## Как устроена программа:

### sensors/
Содержит датчики

camera.py - детекция людей (YOLO)
mock_arduino_data_reader.py - фиктивные данные от Arduino (если нет реального порта)
arduino_data_reader.py - реальные данные от Arduino 

### actuators/
Контроллеры устройств

heater_controller.py - управление обогревателем
ac_controller.py - управление кондиционером
light_controller.py - управление освещением
ventilation_controller.py - управление вентиляцией

### core/
Ядро системы

room_state.py - хранение текущего состояния помещения и сохранение

### bot/
Telegram-бот

telegram_bot.py - обработчик команд, показывает состояние через Telegram

### main.py
Запускает всю систему. Связывает всё вместе.

---

## Как работает:

1. Камера определяет, сколько людей (есть возможность запуска видео)
2. С датчиков Arduino приходят данные (температура помещения и улицы, CO2, свет)
3. Контроллеры решают, что включить
4. Все данные записываются в state_log.json
5. Бот отправляет актуальное состояние пользователю

---

## Что сохраняется:

Все данные о состоянии комнаты записываются в файл state_log.json.  
Пример записи:
{
  "timestamp": "2025-06-04T12:00:00",
  "people_count": 2,
  "indoor_temp": 22.5,
  "outdoor_temp": 18.0,
  "light": 600,
  "co2": 900,
  "heater": "off",
  "ac": "off",
  "light_power": "off",
  "ventilation": "off"
}

---

## Что можно доработать:

- Графики из логов
- Удалённое управление (вкл/выкл устройства через Telegram)
- Трекинг входа и выхода людей